<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Page Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="css/reset.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="css/style.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="css/codemirror-repl.css" />
  <script src="js/codemirror-repl.js"></script>
</head>

<body>
  <div class="content">
    <header>
      <h1>Radicle</h1>
      <h3>A blocktree language</h3>
    </header>
    <div class="repl">
      <textarea id="repl" autofocus="true"></textarea>
    </div>
  </div>
  <div class="footer">
    <div class="footerContent">
      <div class="about">
        <h4>Why Radicle</h4>
        <p>
          Over the last few decades, with the emergence of open-source software, we've experienced an unprecedented acceleration in
          the development of.
        </p>
      </div>
      <div class="contact">
        <h4>Why Radicle</h4>
        <p>
          Over the last few decades, with the emergence of open-source software, we've experienced an unprecedented acceleration in
          the development of.
        </p>
        <a href="">radicle@monadic.xyz</a>
      </div>
    </div>
  </div>
</body>
<script language="javascript" src="js/all.min.js"></script>

<script language="javascript">
  // Setup the repl.
  var repl = new CodeMirrorREPL("repl", {
    mode: "javascript",
    theme: "eclipse"
  });

  function sleep(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }

  async function eval_fn(expr) {
    var tmp = { "arg": expr };
    try {
      eval_fn_(tmp);
      if (typeof tmp.result === "undefined") {
        console.log("sleeping in the hope this is an async call");
        await sleep(1000);
      }
      repl.print(tmp.result);
    } catch (error) {
      console.log(error);
      repl.print(error, "error");
    }
  }
  repl.eval = eval_fn

</script>

</html>